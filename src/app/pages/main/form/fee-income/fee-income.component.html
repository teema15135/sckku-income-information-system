<div class="table-container mat-elevation-z8">
  <h2 class="p-5 font-weight-bold text-gray-1 title">
    บันทึกรายได้ค่าธรรมเนียมการศึกษา
  </h2>
  <table mat-table [dataSource]="formModel">
    <ng-container matColumnDef="header1">
      <th
        mat-header-cell
        *matHeaderCellDef
        [attr.colspan]="6"
        class="borderRight leftBg"
      >
        รายได้ในฐานะเจ้าของนักศึกษา
      </th>
    </ng-container>

    <ng-container matColumnDef="header2">
      <th mat-header-cell *matHeaderCellDef [attr.colspan]="6" class="rightBg">
        รายได้ในฐานะเจ้าของวิชา
      </th>
    </ng-container>

    <ng-container matColumnDef="header11">
      <th mat-header-cell *matHeaderCellDef [attr.colspan]="3">
        ภาคปกติ
      </th>
    </ng-container>

    <ng-container matColumnDef="header12">
      <th
        mat-header-cell
        *matHeaderCellDef
        [attr.colspan]="3"
        class="borderRight"
      >
        โครงการพิเศษ
      </th>
    </ng-container>

    <!--  -->
    <ng-container matColumnDef="header111">
      <th mat-header-cell *matHeaderCellDef [attr.colspan]="1">
        ป.ตรี
      </th>
      <td mat-cell *matCellDef="let row; let i = index" class="border-bottom">
        <input
          [formControl]="getFormControl(i, 0)"
          type="number"
          placeholder="0.00"
          [(ngModel)]="row.values[0]"
          [class.bg-lightgray]="isTitle(row.id)"
        />
      </td>
    </ng-container>

    <ng-container matColumnDef="header112">
      <th mat-header-cell *matHeaderCellDef [attr.colspan]="1">
        ป.โท
      </th>
      <td mat-cell *matCellDef="let row; let i = index">
        <input
          [formControl]="getFormControl(i, 1)"
          type="number"
          placeholder="0.00"
          [(ngModel)]="row.values[1]"
          [class.bg-lightgray]="isTitle(row.id)"
        />
      </td>
    </ng-container>

    <ng-container matColumnDef="header113">
      <th mat-header-cell *matHeaderCellDef [attr.colspan]="1">
        ป.เอก
      </th>
      <td mat-cell *matCellDef="let row; let i = index" class="subBorderRight">
        <input
          [formControl]="getFormControl(i, 2)"
          type="number"
          placeholder="0.00"
          [(ngModel)]="row.values[2]"
          [class.bg-lightgray]="isTitle(row.id)"
        />
      </td>
    </ng-container>

    <ng-container matColumnDef="header121">
      <th mat-header-cell *matHeaderCellDef [attr.colspan]="1">
        ป.ตรี
      </th>
      <td mat-cell *matCellDef="let row; let i = index">
        <input
          [formControl]="getFormControl(i, 3)"
          type="number"
          placeholder="0.00"
          [(ngModel)]="row.values[3]"
          [class.bg-lightgray]="isTitle(row.id)"
        />
      </td>
    </ng-container>

    <ng-container matColumnDef="header122">
      <th mat-header-cell *matHeaderCellDef [attr.colspan]="1">
        ป.โท
      </th>
      <td mat-cell *matCellDef="let row; let i = index">
        <input
          [formControl]="getFormControl(i, 4)"
          type="number"
          placeholder="0.00"
          [(ngModel)]="row.values[4]"
          [class.bg-lightgray]="isTitle(row.id)"
        />
      </td>
    </ng-container>

    <ng-container matColumnDef="header123">
      <th
        mat-header-cell
        *matHeaderCellDef
        [attr.colspan]="1"
        class="borderRight"
      >
        ป.เอก
      </th>
      <td mat-cell *matCellDef="let row; let i = index" class="borderRight">
        <input
          [formControl]="getFormControl(i, 5)"
          type="number"
          placeholder="0.00"
          [(ngModel)]="row.values[5]"
          [class.bg-lightgray]="isTitle(row.id)"
        />
      </td>
    </ng-container>

    <ng-container matColumnDef="header211">
      <th mat-header-cell *matHeaderCellDef [attr.colspan]="1">
        ป.ตรี
      </th>
      <td mat-cell *matCellDef="let row; let i = index">
        <input
          [formControl]="getFormControl(i, 6)"
          type="number"
          placeholder="0.00"
          [(ngModel)]="row.values[6]"
          [class.bg-lightgray]="isTitle(row.id)"
        />
      </td>
    </ng-container>

    <ng-container matColumnDef="header212">
      <th mat-header-cell *matHeaderCellDef [attr.colspan]="1">
        ป.โท
      </th>
      <td mat-cell *matCellDef="let row; let i = index">
        <input
          [formControl]="getFormControl(i, 7)"
          type="number"
          placeholder="0.00"
          [(ngModel)]="row.values[7]"
          [class.bg-lightgray]="isTitle(row.id)"
        />
      </td>
    </ng-container>

    <ng-container matColumnDef="header213">
      <th mat-header-cell *matHeaderCellDef [attr.colspan]="1">
        ป.เอก
      </th>
      <td mat-cell *matCellDef="let row; let i = index" class="subBorderRight">
        <input
          [formControl]="getFormControl(i, 8)"
          type="number"
          placeholder="0.00"
          [(ngModel)]="row.values[8]"
          [class.bg-lightgray]="isTitle(row.id)"
        />
      </td>
    </ng-container>

    <ng-container matColumnDef="header221">
      <th mat-header-cell *matHeaderCellDef [attr.colspan]="1">
        ป.ตรี
      </th>
      <td mat-cell *matCellDef="let row; let i = index">
        <input
          [formControl]="getFormControl(i, 9)"
          type="number"
          placeholder="0.00"
          [(ngModel)]="row.values[9]"
          [class.bg-lightgray]="isTitle(row.id)"
        />
      </td>
    </ng-container>

    <ng-container matColumnDef="header222">
      <th mat-header-cell *matHeaderCellDef [attr.colspan]="1">
        ป.โท
      </th>
      <td mat-cell *matCellDef="let row; let i = index">
        <input
          [formControl]="getFormControl(i, 10)"
          type="number"
          placeholder="0.00"
          [(ngModel)]="row.values[10]"
          [class.bg-lightgray]="isTitle(row.id)"
        />
      </td>
    </ng-container>

    <ng-container matColumnDef="header223">
      <th mat-header-cell *matHeaderCellDef [attr.colspan]="1">
        ป.เอก
      </th>
      <td mat-cell *matCellDef="let row; let i = index" class="subBorderRight">
        <input
          [formControl]="getFormControl(i, 11)"
          type="number"
          placeholder="0.00"
          [(ngModel)]="row.values[11]"
          [class.bg-lightgray]="isTitle(row.id)"
        />
      </td>
    </ng-container>

    <!--  -->

    <ng-container matColumnDef="totalCol">
      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="3">
        รวม
      </th>
      <td mat-cell *matCellDef="let row; let i = index" class="boldText">
        {{ row.values[12] | currency: "฿ " }}
      </td>
    </ng-container>

    <ng-container matColumnDef="joint">
      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="3">
        สาขาวิชา / หลักสูตร
      </th>
      <td
        mat-cell
        *matCellDef="let row; let i = index"
        class="subBorderRight"
        [class.indent]="row.depth !== 0"
        [class.boldText]="row.depth == 0"
      >
        {{ row.name }}
      </td>
    </ng-container>

    <ng-container matColumnDef="empty">
      <th mat-header-cell *matHeaderCellDef></th>
    </ng-container>

    <tr
      mat-header-row
      *matHeaderRowDef="['joint', 'header1', 'header2', 'totalCol']"
    ></tr>
    <tr
      mat-header-row
      *matHeaderRowDef="['header11', 'header12', 'header11', 'header12']"
    ></tr>
    <tr
      mat-header-row
      *matHeaderRowDef="[
        'header111',
        'header112',
        'header113',
        'header121',
        'header122',
        'header123',
        'header211',
        'header212',
        'header213',
        'header221',
        'header222',
        'header223'
      ]"
    ></tr>
    <tr
      mat-row
      [class.bg-lightgray]="isTitle(row.id)"
      *matRowDef="
        let row;
        columns: [
          'joint',
          'header111',
          'header112',
          'header113',
          'header121',
          'header122',
          'header123',
          'header211',
          'header212',
          'header213',
          'header221',
          'header222',
          'header223',
          'totalCol'
        ]
      "
    ></tr>
  </table>
</div>
<div class="m-5 d-flex flex-row justify-content-around">
  <button class="btn btn-primary" (click)="save()">บันทึก</button>
</div>
